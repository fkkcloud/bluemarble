angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$rootScope","$scope","$window",function(e,t,a){function r(){for(var e=0;18>e;e++)EdgeManagerCluster.hideAll(),NodeManagerCluster.hideAll()}function o(){for(var e=0;18>e;e++)EdgeManagerCluster.showAll(),NodeManagerCluster.showAll()}function n(){var e=function(){this.AdditiveColor=!0,this.Restart=function(){location.reload()},this.HideNodes=!1,this.HideNames=!1};RENDEROPTIONS=new e;var t=new dat.GUI,a=t.addFolder("Clusters"),r=a.add(RENDEROPTIONS,"HideNodes"),o=t.addFolder("MergePaths"),n=o.add(RENDEROPTIONS,"HideNodes"),l=o.add(RENDEROPTIONS,"HideNames");r.onFinishChange(function(e){NodeManagerCluster.toggleNodeVisibility(1==e?!1:!0)}),n.onFinishChange(function(e){if(1==e)for(var t=0;t<NodeManagerMergePaths.length;t++)for(var a=0;a<SELECTED_MERGEPATHIDS.length;a++)SELECTED_MERGEPATHIDS[a]===t&&NodeManagerMergePaths[t].toggleNodeVisibility(!1);else for(var t=0;t<NodeManagerMergePaths.length;t++)for(var a=0;a<SELECTED_MERGEPATHIDS.length;a++)SELECTED_MERGEPATHIDS[a]===t&&NodeManagerMergePaths[t].toggleNodeVisibility(!0)}),l.onFinishChange(function(e){if(1==e)for(var t=0;t<NodeManagerMergePaths.length;t++)for(var a=0;a<SELECTED_MERGEPATHIDS.length;a++)SELECTED_MERGEPATHIDS[a]===t&&NodeManagerMergePaths[t].toggleNodeTextVisibility(!1);else for(var t=0;t<NodeManagerMergePaths.length;t++)for(var a=0;a<SELECTED_MERGEPATHIDS.length;a++)SELECTED_MERGEPATHIDS[a]===t&&NodeManagerMergePaths[t].toggleNodeTextVisibility(!0)}),t.add(RENDEROPTIONS,"Restart"),$(t.domElement).find(">ul").toggleClass("closed")}t.meanAge={value:0},t.mergePathIds={value:"acute myocardial infarction"},t.getMenuShow=function(){return t.show_menu},$(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){$(this).trigger("resizeEnd")},200)}),$(window).bind("resizeEnd",function(){location.reload()}),t.cleanMergePaths=function(){NodeManagerMergePaths[SELECTED_MERGEPATHID].clean()},t.resetMergePaths=function(){FRAME.value=0,PAGE_NUM.value=2,TWEEN.removeAll(),NodeManagerMergePaths[SELECTED_MERGEPATHID].reset(),EdgeManagerMergePaths[SELECTED_MERGEPATHID].reset()},t.resetClusters=function(){FRAME.value=0,PAGE_NUM.value=1,t.meanAge.value=0,TWEEN.removeAll(),EdgeManagerCluster.reset(),NodeManagerCluster.reset(),t.setClusterID(SELECTED_CLUSTER),t.updateMeanAge()},t.setClusterID=function(e){return SELECTED_CLUSTER=e,isNaN(e)?void("Not Clustered"==e?(SELECTED_CLUSTER=17,r(),EdgeManagerCluster.toggleShowByCluster(17),NodeManagerCluster.toggleShowByCluster(17)):o()):(r(),EdgeManagerCluster.toggleShowByCluster(SELECTED_CLUSTER),void NodeManagerCluster.toggleShowByCluster(SELECTED_CLUSTER))},t.updateMeanAge=function(){if(!(FRAME.value>620||1!=PAGE_NUM.value)){var e=mapRange([0,620],[35.4,90.5],FRAME.value);t.meanAge.value=Math.ceil(e),t.$apply(),requestAnimationFrame(t.updateMeanAge)}},n()}]),angular.module("app").config(["$routeProvider",function(e){e.when("/mergepaths",{templateUrl:"/templates/mergepaths.html",controller:"MergePathCtrl"}).when("/clusters",{templateUrl:"/templates/clusters.html",controller:"ClusterCtrl"}).when("/intro",{templateUrl:"/templates/intro.html",controller:"IntroCtrl"}).otherwise({redirectTo:"/intro"})}]),angular.module("app").controller("ClusterCtrl",["$rootScope","$scope","$window",function(e,t,a){function r(){PAGE_NUM.value=1,bCanvasLoaded&&$("#options-clusters").css("visibility","visible")}function o(){$(".data-visibility").addClass("active")}r(),$("#clusterid").val(SELECTED_CLUSTER),o(),$("#btn-reset-clusters").click(function(){t.resetClusters()}),t.updateMeanAge(),$("#clusterid").change(function(){var e=$("#clusterid").val();t.setClusterID(e)})}]),angular.module("app").controller("IntroCtrl",["$rootScope","$scope","$window",function(e,t,a){function r(){PAGE_NUM.value=0}function o(){$(".data-visibility").removeClass("active")}r(),o()}]),angular.module("app").controller("MergePathCtrl",["$rootScope","$scope","$window",function(e,t,a){function r(){PAGE_NUM.value=2,bCanvasLoaded&&$("#options-mergepaths").css("visibility","visible")}function o(){$(".data-visibility").addClass("active")}r(),o(),$("#btn-reset-mergepaths").click(function(){t.resetMergePaths()}),$("#btn-run-mergepaths").click(function(){var e=document.getElementById("textinfo-mergepathids").value;try{var a=parseInt(e);if(isNaN(a))for(var r=e.toLowerCase(),o=0;o<MERGEPATH_INITNODE_REF.length;o++){var n=MERGEPATH_INITNODE_REF[o];if(n==r){e=o,console.log("selected disease for",r," is id:",o);break}}}catch(l){return void console.log(l)}t.cleanMergePaths(),SELECTED_MERGEPATHID=e,t.mergePathIds.value=MERGEPATH_INITNODE_REF[e],t.$apply(),t.resetMergePaths()})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJDb250cm9sbGVycy9jbHVzdGVyLmN0cmwuanMiLCJDb250cm9sbGVycy9pbnRyby5jdHJsLmpzIiwiQ29udHJvbGxlcnMvbWVyZ2VwYXRoLmN0cmwuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwiJHdpbmRvdyIsImNsZWFyQWxsQ2x1c3RlcnMiLCJpIiwiRWRnZU1hbmFnZXJDbHVzdGVyIiwiaGlkZUFsbCIsIk5vZGVNYW5hZ2VyQ2x1c3RlciIsInZpZXdBbGxDbHVzdGVycyIsInNob3dBbGwiLCJzZXREYXRhR3VpSW5pdGlhbGl6ZSIsInJlbmRlck9wdGlvbnNVSSIsInRoaXMiLCJBZGRpdGl2ZUNvbG9yIiwiUmVzdGFydCIsImxvY2F0aW9uIiwicmVsb2FkIiwiSGlkZU5vZGVzIiwiSGlkZU5hbWVzIiwiUkVOREVST1BUSU9OUyIsImd1aSIsImRhdCIsIkdVSSIsIkNsdXN0ZXJzR3JwIiwiYWRkRm9sZGVyIiwiQ2x1c3RlckhpZGVOb2RlcyIsImFkZCIsIk1lcmdlUGF0aEdycCIsIk1lcmdlUGF0aEhpZGVOb2RlcyIsIk1lcmdlUGF0aEhpZGVOYW1lcyIsIm9uRmluaXNoQ2hhbmdlIiwidmFsIiwidG9nZ2xlTm9kZVZpc2liaWxpdHkiLCJOb2RlTWFuYWdlck1lcmdlUGF0aHMiLCJsZW5ndGgiLCJqIiwiU0VMRUNURURfTUVSR0VQQVRISURTIiwidG9nZ2xlTm9kZVRleHRWaXNpYmlsaXR5IiwiJCIsImRvbUVsZW1lbnQiLCJmaW5kIiwidG9nZ2xlQ2xhc3MiLCJtZWFuQWdlIiwidmFsdWUiLCJtZXJnZVBhdGhJZHMiLCJnZXRNZW51U2hvdyIsInNob3dfbWVudSIsIndpbmRvdyIsInJlc2l6ZSIsInJlc2l6ZVRPIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInRyaWdnZXIiLCJiaW5kIiwiY2xlYW5NZXJnZVBhdGhzIiwiU0VMRUNURURfTUVSR0VQQVRISUQiLCJjbGVhbiIsInJlc2V0TWVyZ2VQYXRocyIsIkZSQU1FIiwiUEFHRV9OVU0iLCJUV0VFTiIsInJlbW92ZUFsbCIsInJlc2V0IiwiRWRnZU1hbmFnZXJNZXJnZVBhdGhzIiwicmVzZXRDbHVzdGVycyIsInNldENsdXN0ZXJJRCIsIlNFTEVDVEVEX0NMVVNURVIiLCJ1cGRhdGVNZWFuQWdlIiwiY2x1c3RlcmlkIiwiaXNOYU4iLCJ0b2dnbGVTaG93QnlDbHVzdGVyIiwibmV3TWVhbkFnZSIsIm1hcFJhbmdlIiwiTWF0aCIsImNlaWwiLCIkYXBwbHkiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJzZXRQYWdlTnVtIiwiYkNhbnZhc0xvYWRlZCIsImNzcyIsInNldFZpc2liaWxpdHkiLCJhZGRDbGFzcyIsImNsaWNrIiwiY2hhbmdlIiwicmVtb3ZlQ2xhc3MiLCJpbnB1dCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtZXJnZVBhdGhJZCIsInBhcnNlSW50IiwibG93ZXJDYXNlZERpc2Vhc2VOYW1lIiwidG9Mb3dlckNhc2UiLCJNRVJHRVBBVEhfSU5JVE5PREVfUkVGIiwibmFtZSIsImNvbnNvbGUiLCJsb2ciLCJlcnIiXSwibWFwcGluZ3MiOiJBQUNBQSxRQUFBQyxPQUFBLE9BQ0EsWUNGQUQsUUFBQUMsT0FBQSxPQUNBQyxXQUFBLG1CQUFBLGFBQUEsU0FBQSxVQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBdUZBLFFBQUFDLEtBQ0EsSUFBQSxHQUFBQyxHQUFBLEVBQUEsR0FBQUEsRUFBQUEsSUFFQUMsbUJBQUFDLFVBQ0FDLG1CQUFBRCxVQU1BLFFBQUFFLEtBQ0EsSUFBQSxHQUFBSixHQUFBLEVBQUEsR0FBQUEsRUFBQUEsSUFFQUMsbUJBQUFJLFVBQ0FGLG1CQUFBRSxVQWVBLFFBQUFD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QSxVQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBRUEsUUFBQWlGLEtBRUF4QixTQUFBaEIsTUFBQSxFQUdBeUMsZUFDQTlDLEVBQUEsdUJBQUErQyxJQUFBLGFBQUEsV0FLQSxRQUFBQyxLQUVBaEQsRUFBQSxvQkFBQWlELFNBQUEsVUFKQUosSUFPQUcsSUFJQWhELEVBQUEseUJBQUFrRCxNQUFBLFdBRUF2RixFQUFBd0Qsb0JBS0FuQixFQUFBLHVCQUFBa0QsTUFBQSxXQUVBLEdBQUFHLEdBQUFDLFNBQUFDLGVBQUEseUJBQUFsRCxLQUdBLEtBRUEsR0FBQW1ELEdBQUFDLFNBQUFKLEVBQ0EsSUFBQXRCLE1BQUF5QixHQUlBLElBQUEsR0FGQUUsR0FBQUwsRUFBQU0sY0FFQTdGLEVBQUEsRUFBQUEsRUFBQThGLHVCQUFBaEUsT0FBQTlCLElBQUEsQ0FFQSxHQUFBK0YsR0FBQUQsdUJBQUE5RixFQUVBLElBQUErRixHQUFBSCxFQUFBLENBRUFMLEVBQUF2RixFQUNBZ0csUUFBQUMsSUFBQSx1QkFBQUwsRUFBQSxVQUFBNUYsRUFDQSxTQVFBLE1BQUFrRyxHQUVBLFdBREFGLFNBQUFDLElBQUFDLEdBSUFyRyxFQUFBcUQsa0JBRUFDLHFCQUFBb0MsRUFFQTFGLEVBQUEyQyxhQUFBRCxNQUFBdUQsdUJBQUFQLEdBQ0ExRixFQUFBMEUsU0FFQTFFLEVBQUF3RCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG5cdCduZ1JvdXRlJyxcbl0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93KXtcblxuXHQkc2NvcGUubWVhbkFnZSA9IHsgdmFsdWUgOiAwIH07XG5cdCRzY29wZS5tZXJnZVBhdGhJZHMgPSB7IHZhbHVlIDogXCJhY3V0ZSBteW9jYXJkaWFsIGluZmFyY3Rpb25cIn07XG5cblx0JHNjb3BlLmdldE1lbnVTaG93ID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gJHNjb3BlLnNob3dfbWVudTtcblx0fVxuXG5cdC8vIGFzIHJlc2l6ZSwgcmUtaW5pdCBkYXRhc1xuXHQkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgIGlmKHRoaXMucmVzaXplVE8pIGNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRPKTtcblx0ICAgIHRoaXMucmVzaXplVE8gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICQodGhpcykudHJpZ2dlcigncmVzaXplRW5kJyk7XG5cdCAgICB9LCAyMDApO1xuXHR9KTtcblxuXHQkKHdpbmRvdykuYmluZCgncmVzaXplRW5kJywgZnVuY3Rpb24oKSB7XG5cdCAgICAvL2RvIHNvbWV0aGluZywgd2luZG93IGhhc24ndCBjaGFuZ2VkIHNpemUgaW4gNTAwbXNcblx0ICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuXHR9KTtcblxuXG5cdCRzY29wZS5jbGVhbk1lcmdlUGF0aHMgPSBmdW5jdGlvbigpe1xuXG5cdFx0Tm9kZU1hbmFnZXJNZXJnZVBhdGhzW1NFTEVDVEVEX01FUkdFUEFUSElEXS5jbGVhbigpO1xuXG5cdH1cblxuXHQkc2NvcGUucmVzZXRNZXJnZVBhdGhzID0gZnVuY3Rpb24oKXtcblx0XHRGUkFNRS52YWx1ZSAgICA9IDA7XG5cdFx0UEFHRV9OVU0udmFsdWUgPSAyO1xuXG5cdFx0VFdFRU4ucmVtb3ZlQWxsKCk7IC8vIHJlc2V0IHR3ZWVuIGFuaW1hdGlvbnNcblxuXHRcdE5vZGVNYW5hZ2VyTWVyZ2VQYXRoc1tTRUxFQ1RFRF9NRVJHRVBBVEhJRF0ucmVzZXQoKTtcblx0XHRFZGdlTWFuYWdlck1lcmdlUGF0aHNbU0VMRUNURURfTUVSR0VQQVRISURdLnJlc2V0KCk7XG5cblx0fVxuXG5cdCRzY29wZS5yZXNldENsdXN0ZXJzID0gZnVuY3Rpb24oKXtcblxuICAgICAgXHRGUkFNRS52YWx1ZSAgICA9IDA7XG4gICAgICBcdFBBR0VfTlVNLnZhbHVlID0gMTtcblxuICAgICAgXHQkc2NvcGUubWVhbkFnZS52YWx1ZSA9IDA7XG5cbiAgICAgIFx0VFdFRU4ucmVtb3ZlQWxsKCk7IC8vIHJlc2V0IHR3ZWVuIGFuaW1hdGlvbnNcblxuICAgICAgXHRFZGdlTWFuYWdlckNsdXN0ZXIucmVzZXQoKTtcbiAgICAgIFx0Tm9kZU1hbmFnZXJDbHVzdGVyLnJlc2V0KCk7XG5cbiAgICAgIFx0JHNjb3BlLnNldENsdXN0ZXJJRChTRUxFQ1RFRF9DTFVTVEVSKTtcblxuICAgICAgXHQkc2NvcGUudXBkYXRlTWVhbkFnZSgpO1xuXHRcblx0fVxuXG5cdCRzY29wZS5zZXRDbHVzdGVySUQgPSBmdW5jdGlvbihjbHVzdGVyaWQpe1xuXG5cdCAgICBTRUxFQ1RFRF9DTFVTVEVSID0gY2x1c3RlcmlkO1xuXG5cdCAgICBpZiAoaXNOYU4oY2x1c3RlcmlkKSl7XG5cblx0ICAgICAgaWYgKGNsdXN0ZXJpZCA9PSAnTm90IENsdXN0ZXJlZCcpe1xuXG5cdCAgICAgICAgU0VMRUNURURfQ0xVU1RFUiA9IDE3O1xuXHQgICAgICAgIFxuXHQgICAgICAgIGNsZWFyQWxsQ2x1c3RlcnMoKTtcblx0ICAgICAgICBFZGdlTWFuYWdlckNsdXN0ZXIudG9nZ2xlU2hvd0J5Q2x1c3RlcigxNyk7XG5cdCAgICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLnRvZ2dsZVNob3dCeUNsdXN0ZXIoMTcpO1xuXG5cdCAgICAgIH0gZWxzZSB7XG5cblx0ICAgICAgICB2aWV3QWxsQ2x1c3RlcnMoKTsgIFxuXG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblxuXHQgICAgY2xlYXJBbGxDbHVzdGVycygpO1xuXHQgICAgRWRnZU1hbmFnZXJDbHVzdGVyLnRvZ2dsZVNob3dCeUNsdXN0ZXIoU0VMRUNURURfQ0xVU1RFUik7XG5cdCAgICBOb2RlTWFuYWdlckNsdXN0ZXIudG9nZ2xlU2hvd0J5Q2x1c3RlcihTRUxFQ1RFRF9DTFVTVEVSKTtcblx0fVxuXG5cdC8vIGNsZWFyIGFsbCBjbHVzdGVyc1xuICBcdGZ1bmN0aW9uIGNsZWFyQWxsQ2x1c3RlcnMoKXsgLy8g7KeA6riIIOydtOqyjCBnbG9iYWzroZwg7KCV7J2Y65CcIOqyg+yduOuNsCwg7JWE66eI64+EIO2BtOuhnOylrOyWtCDslYjsl5Ag64Sj7Ja07IScLCDsnbQg7YyM7J28IOyViOyXkOyEnOunjCDqsIDriqXtlZwgbG9jYWwgc3BhY2XroZwg7Jiu6rKo7JW8IO2VoOuTr+yLtuuLpC5cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTg7IGkrKyl7XG5cblx0ICAgICAgRWRnZU1hbmFnZXJDbHVzdGVyLmhpZGVBbGwoKTtcblx0ICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLmhpZGVBbGwoKTtcblxuXHQgICAgfVxuXHR9XG5cblx0ICAvLyBjbGVhciBhbGwgY2x1c3RlcnNcblx0ICBmdW5jdGlvbiB2aWV3QWxsQ2x1c3RlcnMoKXtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTg7IGkrKyl7XG5cblx0ICAgICAgRWRnZU1hbmFnZXJDbHVzdGVyLnNob3dBbGwoKTtcblx0ICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLnNob3dBbGwoKTtcblxuXHQgICAgfVxuXHR9XG5cblx0JHNjb3BlLnVwZGF0ZU1lYW5BZ2UgPSBmdW5jdGlvbigpe1xuXHQgICAgaWYgKEZSQU1FLnZhbHVlID4gNjIwIHx8IFBBR0VfTlVNLnZhbHVlICE9IDEpXG5cdCAgICAgIHJldHVybjtcblxuXHQgICAgdmFyIG5ld01lYW5BZ2UgPSBtYXBSYW5nZShbMCwgNjIwLjBdLCBbMzUuNCwgOTAuNV0sIEZSQU1FLnZhbHVlKTtcblx0ICAgICRzY29wZS5tZWFuQWdlLnZhbHVlID0gTWF0aC5jZWlsKG5ld01lYW5BZ2UpO1xuXHQgICAgJHNjb3BlLiRhcHBseSgpO1xuXHQgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCRzY29wZS51cGRhdGVNZWFuQWdlKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldERhdGFHdWlJbml0aWFsaXplKCl7XG5cblx0ICAgIHZhciByZW5kZXJPcHRpb25zVUkgPSBmdW5jdGlvbigpIHtcblxuXHQgICAgICB0aGlzLkFkZGl0aXZlQ29sb3IgPSB0cnVlO1xuXG5cdCAgICAgIHRoaXMuUmVzdGFydCA9IGZ1bmN0aW9uKCkgeyBcblxuXHQgICAgICBcdCAvLyByZXN0YXJ0IHRoZSBwYWdlXG5cdCAgICAgIFx0IGxvY2F0aW9uLnJlbG9hZCgpO1xuXG5cdCAgICAgIH07XG5cblx0ICAgICAgdGhpcy5IaWRlTm9kZXMgPSBmYWxzZTtcblxuXHQgICAgICB0aGlzLkhpZGVOYW1lcyA9IGZhbHNlO1xuXG5cdCAgICB9O1xuXG5cdCAgICBSRU5ERVJPUFRJT05TIFx0PSBuZXcgcmVuZGVyT3B0aW9uc1VJKCk7XG5cdCAgICB2YXIgZ3VpICBcdFx0PSBuZXcgZGF0LkdVSSgpO1xuXG5cdCAgICB2YXIgQ2x1c3RlcnNHcnAgPSBndWkuYWRkRm9sZGVyKCdDbHVzdGVycycpO1xuXHRcdHZhciBDbHVzdGVySGlkZU5vZGVzID0gQ2x1c3RlcnNHcnAuYWRkKFJFTkRFUk9QVElPTlMsICdIaWRlTm9kZXMnKTtcblxuXHRcdHZhciBNZXJnZVBhdGhHcnAgPSBndWkuYWRkRm9sZGVyKCdNZXJnZVBhdGhzJyk7XG5cdFx0dmFyIE1lcmdlUGF0aEhpZGVOb2RlcyA9IE1lcmdlUGF0aEdycC5hZGQoUkVOREVST1BUSU9OUywgJ0hpZGVOb2RlcycpO1xuXHRcdHZhciBNZXJnZVBhdGhIaWRlTmFtZXMgPSBNZXJnZVBhdGhHcnAuYWRkKFJFTkRFUk9QVElPTlMsICdIaWRlTmFtZXMnKTtcblxuXHQgICAgQ2x1c3RlckhpZGVOb2Rlcy5vbkZpbmlzaENoYW5nZShmdW5jdGlvbih2YWwpIHtcblx0ICAgIFx0aWYgKHZhbCA9PSB0cnVlKSB7XG5cdFx0ICAgICAgICBOb2RlTWFuYWdlckNsdXN0ZXIudG9nZ2xlTm9kZVZpc2liaWxpdHkoZmFsc2UpO1xuXHQgICAgXHR9XG5cdCAgICBcdGVsc2Uge1xuXHRcdCAgICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLnRvZ2dsZU5vZGVWaXNpYmlsaXR5KHRydWUpO1xuXHQgICAgXHR9XG5cdCAgICB9KTtcblxuXHQgICBcdE1lcmdlUGF0aEhpZGVOb2Rlcy5vbkZpbmlzaENoYW5nZShmdW5jdGlvbih2YWwpIHtcblx0ICAgIFx0aWYgKHZhbCA9PSB0cnVlKSB7XG5cdCAgICAgICAgXHRmb3IgKHZhciBpID0gMDsgaSA8IE5vZGVNYW5hZ2VyTWVyZ2VQYXRocy5sZW5ndGg7IGkrKyl7XG5cblx0XHQgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBTRUxFQ1RFRF9NRVJHRVBBVEhJRFMubGVuZ3RoOyBqKyspe1xuXG5cdFx0ICAgICAgICAgICAgaWYgKFNFTEVDVEVEX01FUkdFUEFUSElEU1tqXSA9PT0gaSlcblx0XHQgICAgICAgICAgICAgIE5vZGVNYW5hZ2VyTWVyZ2VQYXRoc1tpXS50b2dnbGVOb2RlVmlzaWJpbGl0eShmYWxzZSk7XG5cblx0XHQgICAgICAgICAgfVxuXHRcdCAgICAgICAgICBcblx0XHQgICAgICAgIH1cblx0ICAgIFx0fVxuXHQgICAgXHRlbHNlIHtcblx0ICAgICAgICBcdGZvciAodmFyIGkgPSAwOyBpIDwgTm9kZU1hbmFnZXJNZXJnZVBhdGhzLmxlbmd0aDsgaSsrKXtcblxuXHRcdCAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IFNFTEVDVEVEX01FUkdFUEFUSElEUy5sZW5ndGg7IGorKyl7XG5cblx0XHQgICAgICAgICAgICBpZiAoU0VMRUNURURfTUVSR0VQQVRISURTW2pdID09PSBpKVxuXHRcdCAgICAgICAgICAgICAgTm9kZU1hbmFnZXJNZXJnZVBhdGhzW2ldLnRvZ2dsZU5vZGVWaXNpYmlsaXR5KHRydWUpO1xuXG5cdFx0ICAgICAgICAgIH1cblxuXHRcdCAgICAgICAgfVxuXHRcdCAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgTWVyZ2VQYXRoSGlkZU5hbWVzLm9uRmluaXNoQ2hhbmdlKGZ1bmN0aW9uKHZhbCkge1xuXHQgICAgXHRpZiAodmFsID09IHRydWUpIHtcblx0ICAgIFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IE5vZGVNYW5hZ2VyTWVyZ2VQYXRocy5sZW5ndGg7IGkrKyl7XG5cblx0XHQgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBTRUxFQ1RFRF9NRVJHRVBBVEhJRFMubGVuZ3RoOyBqKyspe1xuXG5cdFx0ICAgICAgICAgICAgaWYgKFNFTEVDVEVEX01FUkdFUEFUSElEU1tqXSA9PT0gaSlcblx0XHQgICAgICAgICAgICAgIE5vZGVNYW5hZ2VyTWVyZ2VQYXRoc1tpXS50b2dnbGVOb2RlVGV4dFZpc2liaWxpdHkoZmFsc2UpO1xuXG5cdFx0ICAgICAgICAgIH1cblx0XHQgICAgICAgIH1cblx0ICAgIFx0fVxuXHQgICAgXHRlbHNlIHtcblx0ICAgIFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IE5vZGVNYW5hZ2VyTWVyZ2VQYXRocy5sZW5ndGg7IGkrKyl7XG5cblx0XHQgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBTRUxFQ1RFRF9NRVJHRVBBVEhJRFMubGVuZ3RoOyBqKyspe1xuXG5cdFx0ICAgICAgICAgICAgaWYgKFNFTEVDVEVEX01FUkdFUEFUSElEU1tqXSA9PT0gaSlcblx0XHQgICAgICAgICAgICAgIE5vZGVNYW5hZ2VyTWVyZ2VQYXRoc1tpXS50b2dnbGVOb2RlVGV4dFZpc2liaWxpdHkodHJ1ZSk7XG5cblx0XHQgICAgICAgICAgfVxuXHRcdCAgICAgICAgfVxuXHQgICAgXHR9XG5cdCAgICB9KTtcblxuXHQgICAgZ3VpLmFkZChSRU5ERVJPUFRJT05TLCAnUmVzdGFydCcpO1xuXG5cdCAgICAkKGd1aS5kb21FbGVtZW50KS5maW5kKFwiPnVsXCIpLnRvZ2dsZUNsYXNzKFwiY2xvc2VkXCIpOyAvLyBkYXQuZ3VpIGRlZmF1bHQgdG8gYmUgY2xvc2VkXG5cblx0fVxuICBcdHNldERhdGFHdWlJbml0aWFsaXplKCk7XG59KTsiLCJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpe1xuXHQkcm91dGVQcm92aWRlclxuXHQud2hlbignL21lcmdlcGF0aHMnLCBcblx0XHR7XG5cdFx0XHR0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvbWVyZ2VwYXRocy5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdNZXJnZVBhdGhDdHJsJ1xuXHRcdH0pXG5cdC53aGVuKCcvY2x1c3RlcnMnLCBcblx0XHR7XG5cdFx0XHR0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvY2x1c3RlcnMuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnQ2x1c3RlckN0cmwnXG5cdFx0fSlcblx0LndoZW4oJy9pbnRybycsIFxuXHRcdHtcblx0XHRcdHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9pbnRyby5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdJbnRyb0N0cmwnXG5cdFx0fSlcblx0Lm90aGVyd2lzZShcblx0XHR7XG4gICBcdFx0XHRyZWRpcmVjdFRvOiAnL2ludHJvJ1xuXHRcdH0pO1xuXG59KTtcbiIsIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQ2x1c3RlckN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR3aW5kb3cpe1xuXG4gIGZ1bmN0aW9uIHNldFBhZ2VOdW0oKXtcbiAgICBQQUdFX05VTS52YWx1ZSA9IDE7IC8vIDEgLSBjbHVzdGVyXG5cbiAgICBpZiAoYkNhbnZhc0xvYWRlZClcbiAgICAgICQoJyNvcHRpb25zLWNsdXN0ZXJzJykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgfVxuICBzZXRQYWdlTnVtKCk7XG5cblxuICAkKCcjY2x1c3RlcmlkJykudmFsKFNFTEVDVEVEX0NMVVNURVIpO1xuXG5cbiAgZnVuY3Rpb24gc2V0VmlzaWJpbGl0eSgpe1xuICAgICQoJy5kYXRhLXZpc2liaWxpdHknKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gIH1cbiAgc2V0VmlzaWJpbGl0eSgpO1xuXG5cbiAgLy8gcmVzZXQgYW5pbWF0aW9uLlxuICAkKCcjYnRuLXJlc2V0LWNsdXN0ZXJzJykuY2xpY2soZnVuY3Rpb24oKSB7XG5cbiAgICAkc2NvcGUucmVzZXRDbHVzdGVycygpO1xuXG4gIH0pO1xuXG5cbiAgJHNjb3BlLnVwZGF0ZU1lYW5BZ2UoKTtcbiAgLypcbiAgLy9zZXQgaW5pdGlhbCBzdGF0ZS4gIGV4YW1wbGUgb2YgY2hlY2sgYm94IGV2ZW50XG4gICQoJyNjaGVja2JveC1oaWRlLW5vZGVzLWNsdXN0ZXJzJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgaWYoJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpKSB7XG4gICAgICAgIE5vZGVNYW5hZ2VyQ2x1c3Rlci50b2dnbGVOb2RlVmlzaWJpbGl0eSh0cnVlKTtcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgIHtcbiAgICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLnRvZ2dsZU5vZGVWaXNpYmlsaXR5KGZhbHNlKTtcbiAgICAgIH1cbiAgfSk7XG4gICovXG5cbiAgJCgnI2NsdXN0ZXJpZCcpLmNoYW5nZShmdW5jdGlvbigpe1xuXG4gICAgdmFyIGNsdXN0ZXJpZCA9ICQoJyNjbHVzdGVyaWQnKS52YWwoKTtcblxuICAgICRzY29wZS5zZXRDbHVzdGVySUQoY2x1c3RlcmlkKTtcblxuICB9KVxuXG5cbn0pOyIsIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignSW50cm9DdHJsJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93KXtcblxuXHRmdW5jdGlvbiBzZXRQYWdlTnVtKCl7XG4gICAgXHRQQUdFX05VTS52YWx1ZSA9IDA7XG4gIFx0fVxuICBcdHNldFBhZ2VOdW0oKTtcblxuXG5cdGZ1bmN0aW9uIHNldFZpc2liaWxpdHkoKXtcblx0XHQkKCcuZGF0YS12aXNpYmlsaXR5JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHR9XG5cdHNldFZpc2liaWxpdHkoKTtcblxufSk7IiwiXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdNZXJnZVBhdGhDdHJsJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93KXtcblxuICBmdW5jdGlvbiBzZXRQYWdlTnVtKCl7XG5cbiAgICBQQUdFX05VTS52YWx1ZSA9IDI7XG4gICAgLy8kc2NvcGUucmVzZXRNZXJnZVBhdGhzKCk7XG4gICAgXG4gICAgaWYgKGJDYW52YXNMb2FkZWQpXG4gICAgICAkKCcjb3B0aW9ucy1tZXJnZXBhdGhzJykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcblxuICB9XG4gIHNldFBhZ2VOdW0oKTtcblxuICBmdW5jdGlvbiBzZXRWaXNpYmlsaXR5KCl7XG5cbiAgICAkKCcuZGF0YS12aXNpYmlsaXR5JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gIH1cbiAgc2V0VmlzaWJpbGl0eSgpO1xuXG5cbiAgLy8gcmVzZXQgYW5pbWF0aW9uLlxuICAkKCcjYnRuLXJlc2V0LW1lcmdlcGF0aHMnKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICRzY29wZS5yZXNldE1lcmdlUGF0aHMoKTsgXG5cbiAgfSk7XG5cblxuICAkKCcjYnRuLXJ1bi1tZXJnZXBhdGhzJykuY2xpY2soZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRleHRpbmZvLW1lcmdlcGF0aGlkc1wiKS52YWx1ZTtcblxuICAgIC8vIGRlYWwgd2l0aCBpbnB1dCB0byBmaW5kIG1lcmdlcGF0aCFcbiAgICB0cnkge1xuXG4gICAgICB2YXIgbWVyZ2VQYXRoSWQgPSBwYXJzZUludChpbnB1dCk7XG4gICAgICBpZiAoaXNOYU4obWVyZ2VQYXRoSWQpKXtcblxuICAgICAgICB2YXIgbG93ZXJDYXNlZERpc2Vhc2VOYW1lID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE1FUkdFUEFUSF9JTklUTk9ERV9SRUYubGVuZ3RoOyBpKyspe1xuXG4gICAgICAgICAgdmFyIG5hbWUgPSBNRVJHRVBBVEhfSU5JVE5PREVfUkVGW2ldO1xuXG4gICAgICAgICAgaWYgKG5hbWUgPT0gbG93ZXJDYXNlZERpc2Vhc2VOYW1lKXtcblxuICAgICAgICAgICAgaW5wdXQgPSBpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkIGRpc2Vhc2UgZm9yJywgbG93ZXJDYXNlZERpc2Vhc2VOYW1lLCAnIGlzIGlkOicsIGkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICB9IFxuXG4gICAgICAgIH1cblxuICAgICAgfVxuICAgIH1cbiAgICBjYXRjaChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgJHNjb3BlLmNsZWFuTWVyZ2VQYXRocygpO1xuXG4gICAgU0VMRUNURURfTUVSR0VQQVRISUQgPSBpbnB1dDtcblxuICAgICRzY29wZS5tZXJnZVBhdGhJZHMudmFsdWUgPSBNRVJHRVBBVEhfSU5JVE5PREVfUkVGW2lucHV0XTtcbiAgICAkc2NvcGUuJGFwcGx5KCk7XG5cbiAgICAkc2NvcGUucmVzZXRNZXJnZVBhdGhzKCk7XG5cbiAgfSlcblxuICAvL3NldCBpbml0aWFsIHN0YXRlLlxuICAvKlxuICAkKCcjY2hlY2tib3gtaGlkZS1ub2Rlcy1tZXJnZXBhdGhzJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgaWYoJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpKSB7XG5cbiAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTm9kZU1hbmFnZXJNZXJnZVBhdGhzLmxlbmd0aDsgaSsrKXtcblxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgU0VMRUNURURfTUVSR0VQQVRISURTLmxlbmd0aDsgaisrKXtcblxuICAgICAgICAgICAgaWYgKFNFTEVDVEVEX01FUkdFUEFUSElEU1tqXSA9PT0gaSlcbiAgICAgICAgICAgICAgTm9kZU1hbmFnZXJNZXJnZVBhdGhzW2ldLnRvZ2dsZU5vZGVWaXNpYmlsaXR5KHRydWUpO1xuXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgfVxuICAgICAgICBcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgIHtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE5vZGVNYW5hZ2VyTWVyZ2VQYXRocy5sZW5ndGg7IGkrKyl7XG5cbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IFNFTEVDVEVEX01FUkdFUEFUSElEUy5sZW5ndGg7IGorKyl7XG5cbiAgICAgICAgICAgIGlmIChTRUxFQ1RFRF9NRVJHRVBBVEhJRFNbal0gPT09IGkpXG4gICAgICAgICAgICAgIE5vZGVNYW5hZ2VyTWVyZ2VQYXRoc1tpXS50b2dnbGVOb2RlVmlzaWJpbGl0eShmYWxzZSk7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgIH1cblxuICAgICAgfVxuICB9KTtcblxuICAvL3NldCBpbml0aWFsIHN0YXRlLlxuICAkKCcjY2hlY2tib3gtaGlkZS1uYW1lcy1tZXJnZXBhdGhzJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgaWYoJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpKSB7XG5cbiAgICAgICAgTm9kZU1hbmFnZXJNZXJnZVBhdGhzW1NFTEVDVEVEX01FUkdFUEFUSElEXS50b2dnbGVOb2RlVGV4dFZpc2liaWxpdHkodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgfVxuICAgICAgZWxzZVxuICAgICAge1xuXG4gICAgICAgIE5vZGVNYW5hZ2VyTWVyZ2VQYXRoc1tTRUxFQ1RFRF9NRVJHRVBBVEhJRF0udG9nZ2xlTm9kZVRleHRWaXNpYmlsaXR5KGZhbHNlKTtcblxuICAgICAgICAgIH1cblxuICAgICAgICAgfVxuXG4gICAgICB9XG4gIH0pO1xuKi9cbiAgXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=