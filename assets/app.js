angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$rootScope","$scope","$window",function(e,t,a){function r(){for(var e=0;18>e;e++)EdgeManagerCluster.hideAll(),NodeManagerCluster.hideAll()}function o(){for(var e=0;18>e;e++)EdgeManagerCluster.showAll(),NodeManagerCluster.showAll()}function n(){var e=function(){this.AdditiveColor=!0,this.Restart=function(){location.reload()},this.HideNodes=!1,this.HideNames=!1};RENDEROPTIONS=new e;var t=new dat.GUI,a=t.addFolder("Clusters"),r=a.add(RENDEROPTIONS,"HideNodes"),o=t.addFolder("MergePaths"),n=o.add(RENDEROPTIONS,"HideNodes"),l=o.add(RENDEROPTIONS,"HideNames");r.onFinishChange(function(e){NodeManagerCluster.toggleNodeVisibility(1==e?!1:!0)}),n.onFinishChange(function(e){if(1==e)for(var t=0;t<NodeManagerMergePaths.length;t++)for(var a=0;a<SELECTED_MERGEPATHIDS.length;a++)SELECTED_MERGEPATHIDS[a]===t&&NodeManagerMergePaths[t].toggleNodeVisibility(!1);else for(var t=0;t<NodeManagerMergePaths.length;t++)for(var a=0;a<SELECTED_MERGEPATHIDS.length;a++)SELECTED_MERGEPATHIDS[a]===t&&NodeManagerMergePaths[t].toggleNodeVisibility(!0)}),l.onFinishChange(function(e){if(1==e)for(var t=0;t<NodeManagerMergePaths.length;t++)for(var a=0;a<SELECTED_MERGEPATHIDS.length;a++)SELECTED_MERGEPATHIDS[a]===t&&NodeManagerMergePaths[t].toggleNodeTextVisibility(!1);else for(var t=0;t<NodeManagerMergePaths.length;t++)for(var a=0;a<SELECTED_MERGEPATHIDS.length;a++)SELECTED_MERGEPATHIDS[a]===t&&NodeManagerMergePaths[t].toggleNodeTextVisibility(!0)}),t.add(RENDEROPTIONS,"Restart")}t.meanAge={value:0},t.mergePathIds={value:"acute myocardial infarction"},t.getMenuShow=function(){return t.show_menu},$(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){$(this).trigger("resizeEnd")},200)}),$(window).bind("resizeEnd",function(){location.reload()}),t.resetClusters=function(){FRAME.value=0,PAGE_NUM.value=1,t.meanAge.value=0,TWEEN.removeAll(),EdgeManagerCluster.reset(),NodeManagerCluster.reset(),t.setClusterID(SELECTED_CLUSTER),t.updateMeanAge()},t.cleanMergePaths=function(){NodeManagerMergePaths[SELECTED_MERGEPATHID].clean()},t.resetMergePaths=function(){FRAME.value=0,PAGE_NUM.value=2,TWEEN.removeAll(),NodeManagerMergePaths[SELECTED_MERGEPATHID].reset(),EdgeManagerMergePaths[SELECTED_MERGEPATHID].reset()},t.setClusterID=function(e){if(SELECTED_CLUSTER=e,isNaN(e))return void("Not Clustered"==e?(SELECTED_CLUSTER=17,r(),EdgeManagerCluster.toggleShowByCluster(17),NodeManagerCluster.toggleShowByCluster(17)):o());for(var t=0;18>t;t++)EdgeManagerCluster.hideAll(),NodeManagerCluster.hideAll();EdgeManagerCluster.toggleShowByCluster(SELECTED_CLUSTER),NodeManagerCluster.toggleShowByCluster(SELECTED_CLUSTER)},t.updateMeanAge=function(){if(!(FRAME.value>620||1!=PAGE_NUM.value)){var e=mapRange([0,620],[35.4,90.5],FRAME.value);t.meanAge.value=Math.ceil(e),t.$apply(),requestAnimationFrame(t.updateMeanAge)}},n()}]),angular.module("app").config(["$routeProvider",function(e){e.when("/mergepaths",{templateUrl:"/templates/mergepaths.html",controller:"MergePathCtrl"}).when("/clusters",{templateUrl:"/templates/clusters.html",controller:"ClusterCtrl"}).when("/intro",{templateUrl:"/templates/intro.html",controller:"IntroCtrl"}).otherwise({redirectTo:"/intro"})}]),angular.module("app").controller("ClusterCtrl",["$rootScope","$scope","$window",function(e,t,a){function r(){PAGE_NUM.value=1,bCanvasLoaded&&$("#options-clusters").css("visibility","visible")}function o(){$(".data-visibility").addClass("active")}r(),$("#clusterid").val(SELECTED_CLUSTER),o(),$("#btn-reset-clusters").click(function(){t.resetClusters()}),t.updateMeanAge(),$("#clusterid").change(function(){var e=$("#clusterid").val();t.setClusterID(e)})}]),angular.module("app").controller("IntroCtrl",["$rootScope","$scope","$window",function(e,t,a){function r(){PAGE_NUM.value=0}function o(){$(".data-visibility").removeClass("active")}r(),o()}]),angular.module("app").controller("MergePathCtrl",["$rootScope","$scope","$window",function(e,t,a){function r(){PAGE_NUM.value=2,bCanvasLoaded&&$("#options-mergepaths").css("visibility","visible")}function o(){$(".data-visibility").addClass("active")}r(),o(),$("#btn-reset-mergepaths").click(function(){t.resetMergePaths()}),$("#btn-run-mergepaths").click(function(){var e=document.getElementById("textinfo-mergepathids").value;try{var a=parseInt(e);if(isNaN(a))for(var r=e.toLowerCase(),o=0;o<MERGEPATH_INITNODE_REF.length;o++){var n=MERGEPATH_INITNODE_REF[o];if(n==r){e=o,console.log("selected disease for",r," is id:",o);break}}}catch(l){return void console.log(l)}t.cleanMergePaths(),SELECTED_MERGEPATHID=e,t.mergePathIds.value=MERGEPATH_INITNODE_REF[e],t.$apply(),t.resetMergePaths()})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJDb250cm9sbGVycy9jbHVzdGVyLmN0cmwuanMiLCJDb250cm9sbGVycy9pbnRyby5jdHJsLmpzIiwiQ29udHJvbGxlcnMvbWVyZ2VwYXRoLmN0cmwuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwiJHdpbmRvdyIsImNsZWFyQWxsQ2x1c3RlcnMiLCJpIiwiRWRnZU1hbmFnZXJDbHVzdGVyIiwiaGlkZUFsbCIsIk5vZGVNYW5hZ2VyQ2x1c3RlciIsInZpZXdBbGxDbHVzdGVycyIsInNob3dBbGwiLCJzZXREYXRhR3VpSW5pdGlhbGl6ZSIsInJlbmRlck9wdGlvbnNVSSIsInRoaXMiLCJBZGRpdGl2ZUNvbG9yIiwiUmVzdGFydCIsImxvY2F0aW9uIiwicmVsb2FkIiwiSGlkZU5vZGVzIiwiSGlkZU5hbWVzIiwiUkVOREVST1BUSU9OUyIsImd1aSIsImRhdCIsIkdVSSIsIkNsdXN0ZXJzR3JwIiwiYWRkRm9sZGVyIiwiQ2x1c3RlckhpZGVOb2RlcyIsImFkZCIsIk1lcmdlUGF0aEdycCIsIk1lcmdlUGF0aEhpZGVOb2RlcyIsIk1lcmdlUGF0aEhpZGVOYW1lcyIsIm9uRmluaXNoQ2hhbmdlIiwidmFsIiwidG9nZ2xlTm9kZVZpc2liaWxpdHkiLCJOb2RlTWFuYWdlck1lcmdlUGF0aHMiLCJsZW5ndGgiLCJqIiwiU0VMRUNURURfTUVSR0VQQVRISURTIiwidG9nZ2xlTm9kZVRleHRWaXNpYmlsaXR5IiwibWVhbkFnZSIsInZhbHVlIiwibWVyZ2VQYXRoSWRzIiwiZ2V0TWVudVNob3ciLCJzaG93X21lbnUiLCIkIiwid2luZG93IiwicmVzaXplIiwicmVzaXplVE8iLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidHJpZ2dlciIsImJpbmQiLCJyZXNldENsdXN0ZXJzIiwiRlJBTUUiLCJQQUdFX05VTSIsIlRXRUVOIiwicmVtb3ZlQWxsIiwicmVzZXQiLCJzZXRDbHVzdGVySUQiLCJTRUxFQ1RFRF9DTFVTVEVSIiwidXBkYXRlTWVhbkFnZSIsImNsZWFuTWVyZ2VQYXRocyIsIlNFTEVDVEVEX01FUkdFUEFUSElEIiwiY2xlYW4iLCJyZXNldE1lcmdlUGF0aHMiLCJFZGdlTWFuYWdlck1lcmdlUGF0aHMiLCJjbHVzdGVyaWQiLCJpc05hTiIsInRvZ2dsZVNob3dCeUNsdXN0ZXIiLCJuZXdNZWFuQWdlIiwibWFwUmFuZ2UiLCJNYXRoIiwiY2VpbCIsIiRhcHBseSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsInNldFBhZ2VOdW0iLCJiQ2FudmFzTG9hZGVkIiwiY3NzIiwic2V0VmlzaWJpbGl0eSIsImFkZENsYXNzIiwiY2xpY2siLCJjaGFuZ2UiLCJyZW1vdmVDbGFzcyIsImlucHV0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm1lcmdlUGF0aElkIiwicGFyc2VJbnQiLCJsb3dlckNhc2VkRGlzZWFzZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsIk1FUkdFUEFUSF9JTklUTk9ERV9SRUYiLCJuYW1lIiwiY29uc29sZSIsImxvZyIsImVyciJdLCJtYXBwaW5ncyI6IkFBQ0FBLFFBQUFDLE9BQUEsT0FDQSxZQ0RBRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsbUJBQUEsYUFBQSxTQUFBLFVBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0F1RkEsUUFBQUMsS0FDQSxJQUFBLEdBQUFDLEdBQUEsRUFBQSxHQUFBQSxFQUFBQSxJQUVBQyxtQkFBQUMsVUFDQUMsbUJBQUFELFVBTUEsUUFBQUUsS0FDQSxJQUFBLEdBQUFKLEdBQUEsRUFBQSxHQUFBQSxFQUFBQSxJQUVBQyxtQkFBQUksVUFDQUYsbUJBQUFFLFVBZUEsUUFBQUMsS0FFQSxHQUFBQyxHQUFBLFdBRUFDLEtBQUFDLGVBQUEs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QyxHQUVBLFFBQUE4RSxLQUVBM0IsU0FBQWQsTUFBQSxFQUdBMEMsZUFDQXRDLEVBQUEsdUJBQUF1QyxJQUFBLGFBQUEsV0FLQSxRQUFBQyxLQUVBeEMsRUFBQSxvQkFBQXlDLFNBQUEsVUFKQUosSUFPQUcsSUFJQXhDLEVBQUEseUJBQUEwQyxNQUFBLFdBRUFwRixFQUFBOEQsb0JBS0FwQixFQUFBLHVCQUFBMEMsTUFBQSxXQUVBLEdBQUFHLEdBQUFDLFNBQUFDLGVBQUEseUJBQUFuRCxLQUdBLEtBRUEsR0FBQW9ELEdBQUFDLFNBQUFKLEVBQ0EsSUFBQXRCLE1BQUF5QixHQUlBLElBQUEsR0FGQUUsR0FBQUwsRUFBQU0sY0FFQTFGLEVBQUEsRUFBQUEsRUFBQTJGLHVCQUFBN0QsT0FBQTlCLElBQUEsQ0FFQSxHQUFBNEYsR0FBQUQsdUJBQUEzRixFQUVBLElBQUE0RixHQUFBSCxFQUFBLENBRUFMLEVBQUFwRixFQUNBNkYsUUFBQUMsSUFBQSx1QkFBQUwsRUFBQSxVQUFBekYsRUFDQSxTQVFBLE1BQUErRixHQUVBLFdBREFGLFNBQUFDLElBQUFDLEdBSUFsRyxFQUFBMkQsa0JBRUFDLHFCQUFBMkIsRUFFQXZGLEVBQUF1QyxhQUFBRCxNQUFBd0QsdUJBQUFQLEdBQ0F2RixFQUFBdUUsU0FFQXZFLEVBQUE4RCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG5cdCduZ1JvdXRlJyxcbl0pO1xuIiwiXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR3aW5kb3cpe1xuXG5cdCRzY29wZS5tZWFuQWdlID0geyB2YWx1ZSA6IDAgfTtcblx0JHNjb3BlLm1lcmdlUGF0aElkcyA9IHsgdmFsdWUgOiBcImFjdXRlIG15b2NhcmRpYWwgaW5mYXJjdGlvblwifTtcblxuXHQkc2NvcGUuZ2V0TWVudVNob3cgPSBmdW5jdGlvbigpe1xuXHRcdHJldHVybiAkc2NvcGUuc2hvd19tZW51O1xuXHR9XG5cblx0Ly8gYXMgcmVzaXplLCByZS1pbml0IGRhdGFzXG5cdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgaWYodGhpcy5yZXNpemVUTykgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVE8pO1xuXHQgICAgdGhpcy5yZXNpemVUTyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdyZXNpemVFbmQnKTtcblx0ICAgIH0sIDIwMCk7XG5cdH0pO1xuXG5cdCQod2luZG93KS5iaW5kKCdyZXNpemVFbmQnLCBmdW5jdGlvbigpIHtcblx0ICAgIC8vZG8gc29tZXRoaW5nLCB3aW5kb3cgaGFzbid0IGNoYW5nZWQgc2l6ZSBpbiA1MDBtc1xuXHQgICAgbG9jYXRpb24ucmVsb2FkKCk7XG5cdH0pO1xuXG5cblx0JHNjb3BlLnJlc2V0Q2x1c3RlcnMgPSBmdW5jdGlvbigpe1xuXG4gICAgICBcdEZSQU1FLnZhbHVlICAgID0gMDtcbiAgICAgIFx0UEFHRV9OVU0udmFsdWUgPSAxO1xuXG4gICAgICBcdCRzY29wZS5tZWFuQWdlLnZhbHVlID0gMDtcblxuICAgICAgXHRUV0VFTi5yZW1vdmVBbGwoKTsgLy8gcmVzZXQgdHdlZW4gYW5pbWF0aW9uc1xuXG4gICAgICBcdEVkZ2VNYW5hZ2VyQ2x1c3Rlci5yZXNldCgpO1xuICAgICAgXHROb2RlTWFuYWdlckNsdXN0ZXIucmVzZXQoKTtcblxuICAgICAgXHQkc2NvcGUuc2V0Q2x1c3RlcklEKFNFTEVDVEVEX0NMVVNURVIpO1xuXG4gICAgICBcdCRzY29wZS51cGRhdGVNZWFuQWdlKCk7XG5cdFxuXHR9XG5cblx0JHNjb3BlLmNsZWFuTWVyZ2VQYXRocyA9IGZ1bmN0aW9uKCl7XG5cblx0XHROb2RlTWFuYWdlck1lcmdlUGF0aHNbU0VMRUNURURfTUVSR0VQQVRISURdLmNsZWFuKCk7XG5cblx0fVxuXG5cdCRzY29wZS5yZXNldE1lcmdlUGF0aHMgPSBmdW5jdGlvbigpe1xuXHRcdEZSQU1FLnZhbHVlICAgID0gMDtcblx0XHRQQUdFX05VTS52YWx1ZSA9IDI7XG5cblx0XHRUV0VFTi5yZW1vdmVBbGwoKTsgLy8gcmVzZXQgdHdlZW4gYW5pbWF0aW9uc1xuXG5cdFx0Tm9kZU1hbmFnZXJNZXJnZVBhdGhzW1NFTEVDVEVEX01FUkdFUEFUSElEXS5yZXNldCgpO1xuXHRcdEVkZ2VNYW5hZ2VyTWVyZ2VQYXRoc1tTRUxFQ1RFRF9NRVJHRVBBVEhJRF0ucmVzZXQoKTtcblxuXHR9XG5cblx0JHNjb3BlLnNldENsdXN0ZXJJRCA9IGZ1bmN0aW9uKGNsdXN0ZXJpZCl7XG5cblx0ICAgIFNFTEVDVEVEX0NMVVNURVIgPSBjbHVzdGVyaWQ7XG5cblx0ICAgIGlmIChpc05hTihjbHVzdGVyaWQpKXtcblxuXHQgICAgICBpZiAoY2x1c3RlcmlkID09ICdOb3QgQ2x1c3RlcmVkJyl7XG5cdCAgICAgICAgU0VMRUNURURfQ0xVU1RFUiA9IDE3O1xuXHQgICAgICAgIGNsZWFyQWxsQ2x1c3RlcnMoKTtcblx0ICAgICAgICBFZGdlTWFuYWdlckNsdXN0ZXIudG9nZ2xlU2hvd0J5Q2x1c3RlcigxNyk7XG5cdCAgICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLnRvZ2dsZVNob3dCeUNsdXN0ZXIoMTcpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZpZXdBbGxDbHVzdGVycygpOyAgXG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxODsgaSsrKXtcblxuXHQgICAgICBFZGdlTWFuYWdlckNsdXN0ZXIuaGlkZUFsbCgpO1xuXHQgICAgICBOb2RlTWFuYWdlckNsdXN0ZXIuaGlkZUFsbCgpO1xuXG5cdCAgICB9XG5cdCAgICBFZGdlTWFuYWdlckNsdXN0ZXIudG9nZ2xlU2hvd0J5Q2x1c3RlcihTRUxFQ1RFRF9DTFVTVEVSKTtcblx0ICAgIE5vZGVNYW5hZ2VyQ2x1c3Rlci50b2dnbGVTaG93QnlDbHVzdGVyKFNFTEVDVEVEX0NMVVNURVIpO1xuXHR9XG5cblx0Ly8gY2xlYXIgYWxsIGNsdXN0ZXJzXG4gIGZ1bmN0aW9uIGNsZWFyQWxsQ2x1c3RlcnMoKXsgLy8g7KeA6riIIOydtOqyjCBnbG9iYWzroZwg7KCV7J2Y65CcIOqyg+yduOuNsCwg7JWE66eI64+EIO2BtOuhnOylrOyWtCDslYjsl5Ag64Sj7Ja07IScLCDsnbQg7YyM7J28IOyViOyXkOyEnOunjCDqsIDriqXtlZwgbG9jYWwgc3BhY2XroZwg7Jiu6rKo7JW8IO2VoOuTr+yLtuuLpC5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE4OyBpKyspe1xuXG4gICAgICBFZGdlTWFuYWdlckNsdXN0ZXIuaGlkZUFsbCgpO1xuICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLmhpZGVBbGwoKTtcblxuICAgIH1cbiAgfVxuXG4gIC8vIGNsZWFyIGFsbCBjbHVzdGVyc1xuICBmdW5jdGlvbiB2aWV3QWxsQ2x1c3RlcnMoKXtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE4OyBpKyspe1xuXG4gICAgICBFZGdlTWFuYWdlckNsdXN0ZXIuc2hvd0FsbCgpO1xuICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLnNob3dBbGwoKTtcblxuICAgIH1cbiAgfVxuXG5cdCRzY29wZS51cGRhdGVNZWFuQWdlID0gZnVuY3Rpb24oKXtcblx0ICAgIGlmIChGUkFNRS52YWx1ZSA+IDYyMCB8fCBQQUdFX05VTS52YWx1ZSAhPSAxKVxuXHQgICAgICByZXR1cm47XG5cblx0ICAgIHZhciBuZXdNZWFuQWdlID0gbWFwUmFuZ2UoWzAsIDYyMC4wXSwgWzM1LjQsIDkwLjVdLCBGUkFNRS52YWx1ZSk7XG5cdCAgICAkc2NvcGUubWVhbkFnZS52YWx1ZSA9IE1hdGguY2VpbChuZXdNZWFuQWdlKTtcblx0ICAgICRzY29wZS4kYXBwbHkoKTtcblx0ICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgkc2NvcGUudXBkYXRlTWVhbkFnZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXREYXRhR3VpSW5pdGlhbGl6ZSgpe1xuXG5cdCAgICB2YXIgcmVuZGVyT3B0aW9uc1VJID0gZnVuY3Rpb24oKSB7XG5cblx0ICAgICAgdGhpcy5BZGRpdGl2ZUNvbG9yID0gdHJ1ZTtcblxuXHQgICAgICB0aGlzLlJlc3RhcnQgPSBmdW5jdGlvbigpIHsgXG5cblx0ICAgICAgXHQgLy8gcmVzdGFydCB0aGUgcGFnZVxuXHQgICAgICBcdCBsb2NhdGlvbi5yZWxvYWQoKTtcblxuXHQgICAgICB9O1xuXG5cdCAgICAgIHRoaXMuSGlkZU5vZGVzID0gZmFsc2U7XG5cblx0ICAgICAgdGhpcy5IaWRlTmFtZXMgPSBmYWxzZTtcblxuXHQgICAgfTtcblxuXHQgICAgUkVOREVST1BUSU9OUyBcdD0gbmV3IHJlbmRlck9wdGlvbnNVSSgpO1xuXHQgICAgdmFyIGd1aSAgXHRcdD0gbmV3IGRhdC5HVUkoKTtcblxuXHQgICAgdmFyIENsdXN0ZXJzR3JwID0gZ3VpLmFkZEZvbGRlcignQ2x1c3RlcnMnKTtcblx0XHR2YXIgQ2x1c3RlckhpZGVOb2RlcyA9IENsdXN0ZXJzR3JwLmFkZChSRU5ERVJPUFRJT05TLCAnSGlkZU5vZGVzJyk7XG5cblx0XHR2YXIgTWVyZ2VQYXRoR3JwID0gZ3VpLmFkZEZvbGRlcignTWVyZ2VQYXRocycpO1xuXHRcdHZhciBNZXJnZVBhdGhIaWRlTm9kZXMgPSBNZXJnZVBhdGhHcnAuYWRkKFJFTkRFUk9QVElPTlMsICdIaWRlTm9kZXMnKTtcblx0XHR2YXIgTWVyZ2VQYXRoSGlkZU5hbWVzID0gTWVyZ2VQYXRoR3JwLmFkZChSRU5ERVJPUFRJT05TLCAnSGlkZU5hbWVzJyk7XG5cblx0ICAgIENsdXN0ZXJIaWRlTm9kZXMub25GaW5pc2hDaGFuZ2UoZnVuY3Rpb24odmFsKSB7XG5cdCAgICBcdGlmICh2YWwgPT0gdHJ1ZSkge1xuXHRcdCAgICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLnRvZ2dsZU5vZGVWaXNpYmlsaXR5KGZhbHNlKTtcblx0ICAgIFx0fVxuXHQgICAgXHRlbHNlIHtcblx0XHQgICAgICAgIE5vZGVNYW5hZ2VyQ2x1c3Rlci50b2dnbGVOb2RlVmlzaWJpbGl0eSh0cnVlKTtcblx0ICAgIFx0fVxuXHQgICAgfSk7XG5cblx0ICAgXHRNZXJnZVBhdGhIaWRlTm9kZXMub25GaW5pc2hDaGFuZ2UoZnVuY3Rpb24odmFsKSB7XG5cdCAgICBcdGlmICh2YWwgPT0gdHJ1ZSkge1xuXHQgICAgICAgIFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBOb2RlTWFuYWdlck1lcmdlUGF0aHMubGVuZ3RoOyBpKyspe1xuXG5cdFx0ICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgU0VMRUNURURfTUVSR0VQQVRISURTLmxlbmd0aDsgaisrKXtcblxuXHRcdCAgICAgICAgICAgIGlmIChTRUxFQ1RFRF9NRVJHRVBBVEhJRFNbal0gPT09IGkpXG5cdFx0ICAgICAgICAgICAgICBOb2RlTWFuYWdlck1lcmdlUGF0aHNbaV0udG9nZ2xlTm9kZVZpc2liaWxpdHkoZmFsc2UpO1xuXG5cdFx0ICAgICAgICAgIH1cblx0XHQgICAgICAgICAgXG5cdFx0ICAgICAgICB9XG5cdCAgICBcdH1cblx0ICAgIFx0ZWxzZSB7XG5cdCAgICAgICAgXHRmb3IgKHZhciBpID0gMDsgaSA8IE5vZGVNYW5hZ2VyTWVyZ2VQYXRocy5sZW5ndGg7IGkrKyl7XG5cblx0XHQgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBTRUxFQ1RFRF9NRVJHRVBBVEhJRFMubGVuZ3RoOyBqKyspe1xuXG5cdFx0ICAgICAgICAgICAgaWYgKFNFTEVDVEVEX01FUkdFUEFUSElEU1tqXSA9PT0gaSlcblx0XHQgICAgICAgICAgICAgIE5vZGVNYW5hZ2VyTWVyZ2VQYXRoc1tpXS50b2dnbGVOb2RlVmlzaWJpbGl0eSh0cnVlKTtcblxuXHRcdCAgICAgICAgICB9XG5cblx0XHQgICAgICAgIH1cblx0XHQgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIE1lcmdlUGF0aEhpZGVOYW1lcy5vbkZpbmlzaENoYW5nZShmdW5jdGlvbih2YWwpIHtcblx0ICAgIFx0aWYgKHZhbCA9PSB0cnVlKSB7XG5cdCAgICBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBOb2RlTWFuYWdlck1lcmdlUGF0aHMubGVuZ3RoOyBpKyspe1xuXG5cdFx0ICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgU0VMRUNURURfTUVSR0VQQVRISURTLmxlbmd0aDsgaisrKXtcblxuXHRcdCAgICAgICAgICAgIGlmIChTRUxFQ1RFRF9NRVJHRVBBVEhJRFNbal0gPT09IGkpXG5cdFx0ICAgICAgICAgICAgICBOb2RlTWFuYWdlck1lcmdlUGF0aHNbaV0udG9nZ2xlTm9kZVRleHRWaXNpYmlsaXR5KGZhbHNlKTtcblxuXHRcdCAgICAgICAgICB9XG5cdFx0ICAgICAgICB9XG5cdCAgICBcdH1cblx0ICAgIFx0ZWxzZSB7XG5cdCAgICBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBOb2RlTWFuYWdlck1lcmdlUGF0aHMubGVuZ3RoOyBpKyspe1xuXG5cdFx0ICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgU0VMRUNURURfTUVSR0VQQVRISURTLmxlbmd0aDsgaisrKXtcblxuXHRcdCAgICAgICAgICAgIGlmIChTRUxFQ1RFRF9NRVJHRVBBVEhJRFNbal0gPT09IGkpXG5cdFx0ICAgICAgICAgICAgICBOb2RlTWFuYWdlck1lcmdlUGF0aHNbaV0udG9nZ2xlTm9kZVRleHRWaXNpYmlsaXR5KHRydWUpO1xuXG5cdFx0ICAgICAgICAgIH1cblx0XHQgICAgICAgIH1cblx0ICAgIFx0fVxuXHQgICAgfSk7XG5cblx0ICAgIGd1aS5hZGQoUkVOREVST1BUSU9OUywgJ1Jlc3RhcnQnKTtcblxuXHR9XG4gIFx0c2V0RGF0YUd1aUluaXRpYWxpemUoKTtcbn0pOyIsIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcil7XG5cdCRyb3V0ZVByb3ZpZGVyXG5cdC53aGVuKCcvbWVyZ2VwYXRocycsIFxuXHRcdHtcblx0XHRcdHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9tZXJnZXBhdGhzLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ01lcmdlUGF0aEN0cmwnXG5cdFx0fSlcblx0LndoZW4oJy9jbHVzdGVycycsIFxuXHRcdHtcblx0XHRcdHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9jbHVzdGVycy5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdDbHVzdGVyQ3RybCdcblx0XHR9KVxuXHQud2hlbignL2ludHJvJywgXG5cdFx0e1xuXHRcdFx0dGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2ludHJvLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0ludHJvQ3RybCdcblx0XHR9KVxuXHQub3RoZXJ3aXNlKFxuXHRcdHtcbiAgIFx0XHRcdHJlZGlyZWN0VG86ICcvaW50cm8nXG5cdFx0fSk7XG5cbn0pO1xuIiwiXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdDbHVzdGVyQ3RybCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHdpbmRvdyl7XG5cbiAgZnVuY3Rpb24gc2V0UGFnZU51bSgpe1xuICAgIFBBR0VfTlVNLnZhbHVlID0gMTsgLy8gMSAtIGNsdXN0ZXJcblxuICAgIGlmIChiQ2FudmFzTG9hZGVkKVxuICAgICAgJCgnI29wdGlvbnMtY2x1c3RlcnMnKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICB9XG4gIHNldFBhZ2VOdW0oKTtcblxuXG4gICQoJyNjbHVzdGVyaWQnKS52YWwoU0VMRUNURURfQ0xVU1RFUik7XG5cblxuICBmdW5jdGlvbiBzZXRWaXNpYmlsaXR5KCl7XG4gICAgJCgnLmRhdGEtdmlzaWJpbGl0eScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgfVxuICBzZXRWaXNpYmlsaXR5KCk7XG5cblxuICAvLyByZXNldCBhbmltYXRpb24uXG4gICQoJyNidG4tcmVzZXQtY2x1c3RlcnMnKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICRzY29wZS5yZXNldENsdXN0ZXJzKCk7XG5cbiAgfSk7XG5cblxuICAkc2NvcGUudXBkYXRlTWVhbkFnZSgpO1xuICAvKlxuICAvL3NldCBpbml0aWFsIHN0YXRlLiAgZXhhbXBsZSBvZiBjaGVjayBib3ggZXZlbnRcbiAgJCgnI2NoZWNrYm94LWhpZGUtbm9kZXMtY2x1c3RlcnMnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICBpZigkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgICAgTm9kZU1hbmFnZXJDbHVzdGVyLnRvZ2dsZU5vZGVWaXNpYmlsaXR5KHRydWUpO1xuICAgICAgfVxuICAgICAgZWxzZVxuICAgICAge1xuICAgICAgICBOb2RlTWFuYWdlckNsdXN0ZXIudG9nZ2xlTm9kZVZpc2liaWxpdHkoZmFsc2UpO1xuICAgICAgfVxuICB9KTtcbiAgKi9cblxuICAkKCcjY2x1c3RlcmlkJykuY2hhbmdlKGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgY2x1c3RlcmlkID0gJCgnI2NsdXN0ZXJpZCcpLnZhbCgpO1xuXG4gICAgJHNjb3BlLnNldENsdXN0ZXJJRChjbHVzdGVyaWQpO1xuXG4gIH0pXG5cblxufSk7IiwiXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdJbnRyb0N0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR3aW5kb3cpe1xuXG5cdGZ1bmN0aW9uIHNldFBhZ2VOdW0oKXtcbiAgICBcdFBBR0VfTlVNLnZhbHVlID0gMDtcbiAgXHR9XG4gIFx0c2V0UGFnZU51bSgpO1xuXG5cblx0ZnVuY3Rpb24gc2V0VmlzaWJpbGl0eSgpe1xuXHRcdCQoJy5kYXRhLXZpc2liaWxpdHknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdH1cblx0c2V0VmlzaWJpbGl0eSgpO1xuXG59KTsiLCJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ01lcmdlUGF0aEN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR3aW5kb3cpe1xuXG4gIGZ1bmN0aW9uIHNldFBhZ2VOdW0oKXtcblxuICAgIFBBR0VfTlVNLnZhbHVlID0gMjtcbiAgICAvLyRzY29wZS5yZXNldE1lcmdlUGF0aHMoKTtcbiAgICBcbiAgICBpZiAoYkNhbnZhc0xvYWRlZClcbiAgICAgICQoJyNvcHRpb25zLW1lcmdlcGF0aHMnKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuXG4gIH1cbiAgc2V0UGFnZU51bSgpO1xuXG4gIGZ1bmN0aW9uIHNldFZpc2liaWxpdHkoKXtcblxuICAgICQoJy5kYXRhLXZpc2liaWxpdHknKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgfVxuICBzZXRWaXNpYmlsaXR5KCk7XG5cblxuICAvLyByZXNldCBhbmltYXRpb24uXG4gICQoJyNidG4tcmVzZXQtbWVyZ2VwYXRocycpLmNsaWNrKGZ1bmN0aW9uKCkge1xuXG4gICAgJHNjb3BlLnJlc2V0TWVyZ2VQYXRocygpOyBcblxuICB9KTtcblxuXG4gICQoJyNidG4tcnVuLW1lcmdlcGF0aHMnKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dGluZm8tbWVyZ2VwYXRoaWRzXCIpLnZhbHVlO1xuXG4gICAgLy8gZGVhbCB3aXRoIGlucHV0IHRvIGZpbmQgbWVyZ2VwYXRoIVxuICAgIHRyeSB7XG5cbiAgICAgIHZhciBtZXJnZVBhdGhJZCA9IHBhcnNlSW50KGlucHV0KTtcbiAgICAgIGlmIChpc05hTihtZXJnZVBhdGhJZCkpe1xuXG4gICAgICAgIHZhciBsb3dlckNhc2VkRGlzZWFzZU5hbWUgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTUVSR0VQQVRIX0lOSVROT0RFX1JFRi5sZW5ndGg7IGkrKyl7XG5cbiAgICAgICAgICB2YXIgbmFtZSA9IE1FUkdFUEFUSF9JTklUTk9ERV9SRUZbaV07XG5cbiAgICAgICAgICBpZiAobmFtZSA9PSBsb3dlckNhc2VkRGlzZWFzZU5hbWUpe1xuXG4gICAgICAgICAgICBpbnB1dCA9IGk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWQgZGlzZWFzZSBmb3InLCBsb3dlckNhc2VkRGlzZWFzZU5hbWUsICcgaXMgaWQ6JywgaSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIH0gXG5cbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfVxuICAgIGNhdGNoKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAkc2NvcGUuY2xlYW5NZXJnZVBhdGhzKCk7XG5cbiAgICBTRUxFQ1RFRF9NRVJHRVBBVEhJRCA9IGlucHV0O1xuXG4gICAgJHNjb3BlLm1lcmdlUGF0aElkcy52YWx1ZSA9IE1FUkdFUEFUSF9JTklUTk9ERV9SRUZbaW5wdXRdO1xuICAgICRzY29wZS4kYXBwbHkoKTtcblxuICAgICRzY29wZS5yZXNldE1lcmdlUGF0aHMoKTtcblxuICB9KVxuXG4gIC8vc2V0IGluaXRpYWwgc3RhdGUuXG4gIC8qXG4gICQoJyNjaGVja2JveC1oaWRlLW5vZGVzLW1lcmdlcGF0aHMnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICBpZigkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIikpIHtcblxuICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOb2RlTWFuYWdlck1lcmdlUGF0aHMubGVuZ3RoOyBpKyspe1xuXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBTRUxFQ1RFRF9NRVJHRVBBVEhJRFMubGVuZ3RoOyBqKyspe1xuXG4gICAgICAgICAgICBpZiAoU0VMRUNURURfTUVSR0VQQVRISURTW2pdID09PSBpKVxuICAgICAgICAgICAgICBOb2RlTWFuYWdlck1lcmdlUGF0aHNbaV0udG9nZ2xlTm9kZVZpc2liaWxpdHkodHJ1ZSk7XG5cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfVxuICAgICAgZWxzZVxuICAgICAge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTm9kZU1hbmFnZXJNZXJnZVBhdGhzLmxlbmd0aDsgaSsrKXtcblxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgU0VMRUNURURfTUVSR0VQQVRISURTLmxlbmd0aDsgaisrKXtcblxuICAgICAgICAgICAgaWYgKFNFTEVDVEVEX01FUkdFUEFUSElEU1tqXSA9PT0gaSlcbiAgICAgICAgICAgICAgTm9kZU1hbmFnZXJNZXJnZVBhdGhzW2ldLnRvZ2dsZU5vZGVWaXNpYmlsaXR5KGZhbHNlKTtcblxuICAgICAgICAgIH1cblxuICAgICAgICAgfVxuXG4gICAgICB9XG4gIH0pO1xuXG4gIC8vc2V0IGluaXRpYWwgc3RhdGUuXG4gICQoJyNjaGVja2JveC1oaWRlLW5hbWVzLW1lcmdlcGF0aHMnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICBpZigkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIikpIHtcblxuICAgICAgICBOb2RlTWFuYWdlck1lcmdlUGF0aHNbU0VMRUNURURfTUVSR0VQQVRISURdLnRvZ2dsZU5vZGVUZXh0VmlzaWJpbGl0eSh0cnVlKTtcbiAgICAgICAgXG4gICAgICB9XG4gICAgICBlbHNlXG4gICAgICB7XG5cbiAgICAgICAgTm9kZU1hbmFnZXJNZXJnZVBhdGhzW1NFTEVDVEVEX01FUkdFUEFUSElEXS50b2dnbGVOb2RlVGV4dFZpc2liaWxpdHkoZmFsc2UpO1xuXG4gICAgICAgICAgfVxuXG4gICAgICAgICB9XG5cbiAgICAgIH1cbiAgfSk7XG4qL1xuICBcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==